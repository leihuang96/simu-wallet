{"@timestamp":"2025-01-05T21:13:09.4837358Z","@version":"1","message":"Starting WalletServiceApplication using Java 17.0.13 with PID 1 (/app/app.jar started by root in /app)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:09.542847508Z","@version":"1","message":"Running with Spring Boot v3.4.1, Spring v6.2.1","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:09.573909466Z","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:13.871605218Z","@version":"1","message":"Initializing ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:13.887225052Z","@version":"1","message":"Starting service [Tomcat]","logger_name":"org.apache.catalina.core.StandardService","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:13.88985626Z","@version":"1","message":"Starting Servlet engine: [Apache Tomcat/10.1.34]","logger_name":"org.apache.catalina.core.StandardEngine","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:14.000343593Z","@version":"1","message":"Initializing Spring embedded WebApplicationContext","logger_name":"org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:14.297218094Z","@version":"1","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","logger_name":"org.hibernate.jpa.internal.util.LogHelper","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:14.38958426Z","@version":"1","message":"HHH000412: Hibernate ORM core version 6.6.4.Final","logger_name":"org.hibernate.Version","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:14.443412844Z","@version":"1","message":"HHH000026: Second-level cache disabled","logger_name":"org.hibernate.cache.internal.RegionFactoryInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:14.838099302Z","@version":"1","message":"HikariPool-1 - Starting...","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:15.388168344Z","@version":"1","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@33bfe6d3","logger_name":"com.zaxxer.hikari.pool.HikariPool","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:15.391469927Z","@version":"1","message":"HikariPool-1 - Start completed.","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:15.507350261Z","@version":"1","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","logger_name":"org.hibernate.orm.deprecation","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:15.550463428Z","@version":"1","message":"HHH10001005: Database info:\n\tDatabase JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n\tDatabase driver: undefined/unknown\n\tDatabase version: 15.3\n\tAutocommit mode: undefined/unknown\n\tIsolation level: undefined/unknown\n\tMinimum pool size: undefined/unknown\n\tMaximum pool size: undefined/unknown","logger_name":"org.hibernate.orm.connections.pooling","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:16.587401845Z","@version":"1","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","logger_name":"org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:17.45820297Z","@version":"1","message":"\n    select\n        sce1_0.currency_code,\n        sce1_0.currency_name \n    from\n        supported_currency sce1_0","logger_name":"org.hibernate.SQL","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:18.194674512Z","@version":"1","message":"Creating Kafka Consumer Factory for ConversionResponseEvent","logger_name":"io.github.leihuang96.wallet_service.config.KafkaConsumerConfig","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:20.69912743Z","@version":"1","message":"Initializing Eureka in region us-east-1","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:20.70797743Z","@version":"1","message":"Client configured to neither register nor query for data.","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:20.723960972Z","@version":"1","message":"Discovery Client initialized at timestamp 1736111600719 with initial instances count: 0","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:20.746497138Z","@version":"1","message":"Starting ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:21.685063166Z","@version":"1","message":"These configurations '[spring.json.trusted.packages]' were supplied but are not used yet.","logger_name":"org.apache.kafka.clients.consumer.ConsumerConfig","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:21.699051416Z","@version":"1","message":"Kafka version: 3.3.1","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:21.702556708Z","@version":"1","message":"Kafka commitId: e23c59d00e687ff5","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:21.705084333Z","@version":"1","message":"Kafka startTimeMs: 1736111601689","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:13:21.775449083Z","@version":"1","message":"Started WalletServiceApplication in 16.482 seconds (process running for 19.79)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:31.214537587Z","@version":"1","message":"Metrics scheduler closed","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:31.229724629Z","@version":"1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:31.237526796Z","@version":"1","message":"Metrics reporters closed","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:31.250258337Z","@version":"1","message":"App info kafka.consumer for consumer-wallet-service-group-1 unregistered","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:32.312259838Z","@version":"1","message":"HikariPool-1 - Shutdown initiated...","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:32.329413963Z","@version":"1","message":"HikariPool-1 - Shutdown completed.","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:32.331180588Z","@version":"1","message":"Shutting down DiscoveryClient ...","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:14:32.331713505Z","@version":"1","message":"Completed shut down of DiscoveryClient","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:40.926349384Z","@version":"1","message":"Starting WalletServiceApplication using Java 17.0.13 with PID 1 (/app/app.jar started by root in /app)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:40.940422384Z","@version":"1","message":"Running with Spring Boot v3.4.1, Spring v6.2.1","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:40.949231175Z","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:44.915770886Z","@version":"1","message":"Initializing ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:44.921934761Z","@version":"1","message":"Starting service [Tomcat]","logger_name":"org.apache.catalina.core.StandardService","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:44.924054677Z","@version":"1","message":"Starting Servlet engine: [Apache Tomcat/10.1.34]","logger_name":"org.apache.catalina.core.StandardEngine","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:44.958526219Z","@version":"1","message":"Initializing Spring embedded WebApplicationContext","logger_name":"org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:45.258724636Z","@version":"1","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","logger_name":"org.hibernate.jpa.internal.util.LogHelper","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:45.372596052Z","@version":"1","message":"HHH000412: Hibernate ORM core version 6.6.4.Final","logger_name":"org.hibernate.Version","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:45.439084969Z","@version":"1","message":"HHH000026: Second-level cache disabled","logger_name":"org.hibernate.cache.internal.RegionFactoryInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:45.818525969Z","@version":"1","message":"HikariPool-1 - Starting...","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:46.35284072Z","@version":"1","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61ce238e","logger_name":"com.zaxxer.hikari.pool.HikariPool","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:46.364797386Z","@version":"1","message":"HikariPool-1 - Start completed.","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:46.464206011Z","@version":"1","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","logger_name":"org.hibernate.orm.deprecation","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:46.615633761Z","@version":"1","message":"HHH10001005: Database info:\n\tDatabase JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n\tDatabase driver: undefined/unknown\n\tDatabase version: 15.3\n\tAutocommit mode: undefined/unknown\n\tIsolation level: undefined/unknown\n\tMinimum pool size: undefined/unknown\n\tMaximum pool size: undefined/unknown","logger_name":"org.hibernate.orm.connections.pooling","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:48.017043054Z","@version":"1","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","logger_name":"org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:49.776564763Z","@version":"1","message":"\n    select\n        sce1_0.currency_code,\n        sce1_0.currency_name \n    from\n        supported_currency sce1_0","logger_name":"org.hibernate.SQL","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:50.874368555Z","@version":"1","message":"Creating Kafka Consumer Factory for ConversionResponseEvent","logger_name":"io.github.leihuang96.wallet_service.config.KafkaConsumerConfig","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:54.070958292Z","@version":"1","message":"Initializing Eureka in region us-east-1","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:54.072629126Z","@version":"1","message":"Client configured to neither register nor query for data.","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:54.081809417Z","@version":"1","message":"Discovery Client initialized at timestamp 1736111754080 with initial instances count: 0","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:54.090644584Z","@version":"1","message":"Starting ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:55.030826751Z","@version":"1","message":"These configurations '[spring.json.trusted.packages]' were supplied but are not used yet.","logger_name":"org.apache.kafka.clients.consumer.ConsumerConfig","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:55.037721793Z","@version":"1","message":"Kafka version: 3.3.1","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:55.041818959Z","@version":"1","message":"Kafka commitId: e23c59d00e687ff5","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:55.042015543Z","@version":"1","message":"Kafka startTimeMs: 1736111755033","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:15:55.115982751Z","@version":"1","message":"Started WalletServiceApplication in 16.178 seconds (process running for 17.846)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:01.832999838Z","@version":"1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","logger_name":"org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]","thread_name":"http-nio-8080-exec-2","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:01.929953838Z","@version":"1","message":"Entering method: WalletController.deposit(..) with traceId=677af6cd75956070f42b19a2a2783d23 and spanId=f42b19a2a2783d23","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-2","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:01.930428213Z","@version":"1","message":"Entering method: WalletApplicationServiceImpl.deposit(..) with traceId=677af6cd75956070f42b19a2a2783d23 and spanId=f42b19a2a2783d23","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-2","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:01.967584213Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-2","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:01.997670338Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-2","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:02.017270171Z","@version":"1","message":"\n    update\n        user_wallet \n    set\n        balance=?,\n        created_at=?,\n        currency_code=?,\n        modified_at=?,\n        user_id=?,\n        wallet_id=? \n    where\n        id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-2","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:02.025234921Z","@version":"1","message":"Exiting method: WalletApplicationServiceImpl.deposit(..) with traceId=677af6cd75956070f42b19a2a2783d23 and spanId=f42b19a2a2783d23","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-2","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:02.028546463Z","@version":"1","message":"Exiting method: WalletController.deposit(..) with traceId=677af6cd75956070f42b19a2a2783d23 and spanId=f42b19a2a2783d23","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-2","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:03.134262547Z","@version":"1","message":"Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.","logger_name":"zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter","thread_name":"AsyncReporter{OkHttpSender{http://localhost:9411/api/v2/spans}}","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:17:03.134842713Z","@version":"1","message":"Dropped 1 spans due to ConnectException(Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411)","logger_name":"zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter","thread_name":"AsyncReporter{OkHttpSender{http://localhost:9411/api/v2/spans}}","level":"WARN","level_value":30000,"stack_trace":"java.net.ConnectException: Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411\n\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:297)\n\tat okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:207)\n\tat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\n\tat okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\n\tat okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\n\tat okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\n\tat zipkin2.reporter.okhttp3.InternalOkHttpSender.postSpans(InternalOkHttpSender.java:73)\n\tat zipkin2.reporter.okhttp3.InternalOkHttpSender.postSpans(InternalOkHttpSender.java:36)\n\tat zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)\n\tat zipkin2.reporter.internal.SenderAdapter.send(SenderAdapter.java:44)\n\tat zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)\n\tat zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)\n\tat java.base/java.lang.Thread.run(Thread.java:840)\n\tSuppressed: java.net.ConnectException: Failed to connect to localhost/127.0.0.1:9411\n\t\t... 23 common frames omitted\n\tCaused by: java.net.ConnectException: Connection refused\n\t\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\n\t\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n\t\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)\n\t\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)\n\t\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n\t\tat java.base/java.net.Socket.connect(Socket.java:633)\n\t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n\t\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)\n\t\t... 22 common frames omitted\nCaused by: java.net.ConnectException: Connection refused\n\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\n\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n\tat java.base/java.net.Socket.connect(Socket.java:633)\n\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)\n\t... 22 common frames omitted\n","application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:33.747694755Z","@version":"1","message":"Metrics scheduler closed","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:33.764398505Z","@version":"1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:33.76696988Z","@version":"1","message":"Metrics reporters closed","logger_name":"org.apache.kafka.common.metrics.Metrics","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:33.794249422Z","@version":"1","message":"App info kafka.consumer for consumer-wallet-service-group-1 unregistered","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:34.805130256Z","@version":"1","message":"HikariPool-1 - Shutdown initiated...","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:34.822529589Z","@version":"1","message":"HikariPool-1 - Shutdown completed.","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:34.825980506Z","@version":"1","message":"Shutting down DiscoveryClient ...","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:22:34.826378006Z","@version":"1","message":"Completed shut down of DiscoveryClient","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"SpringApplicationShutdownHook","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:42.729716884Z","@version":"1","message":"Starting WalletServiceApplication using Java 17.0.13 with PID 1 (/app/app.jar started by root in /app)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:42.76773651Z","@version":"1","message":"Running with Spring Boot v3.4.1, Spring v6.2.1","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:42.769584551Z","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:47.13711247Z","@version":"1","message":"Initializing ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:47.144201762Z","@version":"1","message":"Starting service [Tomcat]","logger_name":"org.apache.catalina.core.StandardService","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:47.151249387Z","@version":"1","message":"Starting Servlet engine: [Apache Tomcat/10.1.34]","logger_name":"org.apache.catalina.core.StandardEngine","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:47.418323637Z","@version":"1","message":"Initializing Spring embedded WebApplicationContext","logger_name":"org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:47.861402345Z","@version":"1","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","logger_name":"org.hibernate.jpa.internal.util.LogHelper","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:48.023387095Z","@version":"1","message":"HHH000412: Hibernate ORM core version 6.6.4.Final","logger_name":"org.hibernate.Version","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:48.072702137Z","@version":"1","message":"HHH000026: Second-level cache disabled","logger_name":"org.hibernate.cache.internal.RegionFactoryInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:48.738582679Z","@version":"1","message":"HikariPool-1 - Starting...","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:49.301296554Z","@version":"1","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61ce238e","logger_name":"com.zaxxer.hikari.pool.HikariPool","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:49.305567721Z","@version":"1","message":"HikariPool-1 - Start completed.","logger_name":"com.zaxxer.hikari.HikariDataSource","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:49.390777346Z","@version":"1","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","logger_name":"org.hibernate.orm.deprecation","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:49.432254346Z","@version":"1","message":"HHH10001005: Database info:\n\tDatabase JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']\n\tDatabase driver: undefined/unknown\n\tDatabase version: 15.3\n\tAutocommit mode: undefined/unknown\n\tIsolation level: undefined/unknown\n\tMinimum pool size: undefined/unknown\n\tMaximum pool size: undefined/unknown","logger_name":"org.hibernate.orm.connections.pooling","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:51.253277305Z","@version":"1","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","logger_name":"org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:52.324681208Z","@version":"1","message":"\n    select\n        sce1_0.currency_code,\n        sce1_0.currency_name \n    from\n        supported_currency sce1_0","logger_name":"org.hibernate.SQL","thread_name":"main","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:53.255458667Z","@version":"1","message":"Creating Kafka Consumer Factory for ConversionResponseEvent","logger_name":"io.github.leihuang96.wallet_service.config.KafkaConsumerConfig","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:54.995381251Z","@version":"1","message":"Initializing Eureka in region us-east-1","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:54.998400334Z","@version":"1","message":"Client configured to neither register nor query for data.","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.022907834Z","@version":"1","message":"Discovery Client initialized at timestamp 1736112235011 with initial instances count: 0","logger_name":"com.netflix.discovery.DiscoveryClient","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.052611876Z","@version":"1","message":"Starting ProtocolHandler [\"http-nio-8080\"]","logger_name":"org.apache.coyote.http11.Http11NioProtocol","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.566717835Z","@version":"1","message":"These configurations '[spring.json.trusted.packages]' were supplied but are not used yet.","logger_name":"org.apache.kafka.clients.consumer.ConsumerConfig","thread_name":"main","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.570285793Z","@version":"1","message":"Kafka version: 3.3.1","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.577277335Z","@version":"1","message":"Kafka commitId: e23c59d00e687ff5","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.578561001Z","@version":"1","message":"Kafka startTimeMs: 1736112235567","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:23:55.618769918Z","@version":"1","message":"Started WalletServiceApplication in 15.639 seconds (process running for 17.454)","logger_name":"io.github.leihuang96.wallet_service.WalletServiceApplication","thread_name":"main","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.76347284Z","@version":"1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","logger_name":"org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]","thread_name":"http-nio-8080-exec-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.851666382Z","@version":"1","message":"Entering method: WalletController.deposit(..) with traceId=677afeacc20e2bc5e44ed21d65fe0851 and spanId=e44ed21d65fe0851","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.853615923Z","@version":"1","message":"Entering method: WalletApplicationServiceImpl.deposit(..) with traceId=677afeacc20e2bc5e44ed21d65fe0851 and spanId=e44ed21d65fe0851","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.876849257Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-1","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.901641007Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-1","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.916312757Z","@version":"1","message":"\n    update\n        user_wallet \n    set\n        balance=?,\n        created_at=?,\n        currency_code=?,\n        modified_at=?,\n        user_id=?,\n        wallet_id=? \n    where\n        id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-1","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.938194007Z","@version":"1","message":"Exiting method: WalletApplicationServiceImpl.deposit(..) with traceId=677afeacc20e2bc5e44ed21d65fe0851 and spanId=e44ed21d65fe0851","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:36.942064507Z","@version":"1","message":"Exiting method: WalletController.deposit(..) with traceId=677afeacc20e2bc5e44ed21d65fe0851 and spanId=e44ed21d65fe0851","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-1","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:38.019702757Z","@version":"1","message":"Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.","logger_name":"zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter","thread_name":"AsyncReporter{OkHttpSender{http://localhost:9411/api/v2/spans}}","level":"WARN","level_value":30000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T21:50:38.020244299Z","@version":"1","message":"Dropped 1 spans due to ConnectException(Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411)","logger_name":"zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter","thread_name":"AsyncReporter{OkHttpSender{http://localhost:9411/api/v2/spans}}","level":"WARN","level_value":30000,"stack_trace":"java.net.ConnectException: Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411\n\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:297)\n\tat okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:207)\n\tat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\n\tat okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\n\tat okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\n\tat okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\n\tat zipkin2.reporter.okhttp3.InternalOkHttpSender.postSpans(InternalOkHttpSender.java:73)\n\tat zipkin2.reporter.okhttp3.InternalOkHttpSender.postSpans(InternalOkHttpSender.java:36)\n\tat zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)\n\tat zipkin2.reporter.internal.SenderAdapter.send(SenderAdapter.java:44)\n\tat zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)\n\tat zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)\n\tat java.base/java.lang.Thread.run(Thread.java:840)\n\tSuppressed: java.net.ConnectException: Failed to connect to localhost/127.0.0.1:9411\n\t\t... 23 common frames omitted\n\tCaused by: java.net.ConnectException: Connection refused\n\t\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\n\t\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n\t\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)\n\t\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)\n\t\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n\t\tat java.base/java.net.Socket.connect(Socket.java:633)\n\t\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n\t\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)\n\t\t... 22 common frames omitted\nCaused by: java.net.ConnectException: Connection refused\n\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\n\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n\tat java.base/java.net.Socket.connect(Socket.java:633)\n\tat okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)\n\tat okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)\n\t... 22 common frames omitted\n","application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.807791343Z","@version":"1","message":"Entering method: WalletController.deposit(..) with traceId=677b01837bb5dfe27ddf46e5e301fefc and spanId=7ddf46e5e301fefc","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-5","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.811302301Z","@version":"1","message":"Entering method: WalletApplicationServiceImpl.deposit(..) with traceId=677b01837bb5dfe27ddf46e5e301fefc and spanId=7ddf46e5e301fefc","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-5","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.824454635Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-5","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.83547826Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-5","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.841782926Z","@version":"1","message":"\n    update\n        user_wallet \n    set\n        balance=?,\n        created_at=?,\n        currency_code=?,\n        modified_at=?,\n        user_id=?,\n        wallet_id=? \n    where\n        id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-5","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.85251326Z","@version":"1","message":"Exiting method: WalletApplicationServiceImpl.deposit(..) with traceId=677b01837bb5dfe27ddf46e5e301fefc and spanId=7ddf46e5e301fefc","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-5","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:43.85365451Z","@version":"1","message":"Exiting method: WalletController.deposit(..) with traceId=677b01837bb5dfe27ddf46e5e301fefc and spanId=7ddf46e5e301fefc","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-5","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.665834345Z","@version":"1","message":"Entering method: WalletController.convert(..) with traceId=677b018855fdee8ec42ca98e2d4f51d9 and spanId=c42ca98e2d4f51d9","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.671523012Z","@version":"1","message":"Entering method: WalletApplicationServiceImpl.convert(..) with traceId=677b018855fdee8ec42ca98e2d4f51d9 and spanId=3c31e7dfb4676ce2","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.673111262Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-6","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.67603522Z","@version":"1","message":"\n    select\n        we1_0.id,\n        we1_0.balance,\n        we1_0.created_at,\n        we1_0.currency_code,\n        we1_0.modified_at,\n        we1_0.user_id,\n        we1_0.wallet_id \n    from\n        user_wallet we1_0 \n    where\n        we1_0.wallet_id=?","logger_name":"org.hibernate.SQL","thread_name":"http-nio-8080-exec-6","level":"DEBUG","level_value":10000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.677124137Z","@version":"1","message":"Processed conversion: GBP -> CNY : 30.00","logger_name":"io.github.leihuang96.wallet_service.application.impl.WalletApplicationServiceImpl","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.678288804Z","@version":"1","message":"Exiting method: WalletApplicationServiceImpl.convert(..) with traceId=677b018855fdee8ec42ca98e2d4f51d9 and spanId=3c31e7dfb4676ce2","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.763684179Z","@version":"1","message":"Kafka version: 3.3.1","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.764090429Z","@version":"1","message":"Kafka commitId: e23c59d00e687ff5","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.764272137Z","@version":"1","message":"Kafka startTimeMs: 1736114568763","logger_name":"org.apache.kafka.common.utils.AppInfoParser","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.832109054Z","@version":"1","message":"Sent conversion request to Kafka: TransactionEvent(transactionId=null, userId=820e6a38-6ac1-450f-9578-27efb283f752, type=CONVERT, sourceAmount=30.00, sourceCurrency=GBP, targetAmount=null, targetCurrency=CNY, stockSymbol=null, quantity=null, fee=null, feeCurrency=null, exchangeRate=null, initiatedAt=2025-01-05T22:02:48.678623679, completedAt=null, status=PENDING, description=null, traceId=677b018855fdee8ec42ca98e2d4f51d9, spanId=f9124a4af7f17752)","logger_name":"io.github.leihuang96.wallet_service.event.ConversionRequestProducer","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.851102762Z","@version":"1","message":"Conversion request sent successfully","logger_name":"io.github.leihuang96.wallet_service.controller.WalletController","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:48.851826054Z","@version":"1","message":"Exiting method: WalletController.convert(..) with traceId=677b018855fdee8ec42ca98e2d4f51d9 and spanId=c42ca98e2d4f51d9","logger_name":"io.github.leihuang96.wallet_service.config.TracingAspect","thread_name":"http-nio-8080-exec-6","level":"INFO","level_value":20000,"application":"wallet-service"}
{"@timestamp":"2025-01-05T22:02:54.786320542Z","@version":"1","message":"Backoff FixedBackOff{interval=0, currentAttempts=10, maxAttempts=9} exhausted for conversion-response-0@11","logger_name":"org.springframework.kafka.listener.DefaultErrorHandler","thread_name":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","level":"ERROR","level_value":40000,"stack_trace":"org.springframework.kafka.listener.ListenerExecutionFailedException: Listener method 'public void io.github.leihuang96.wallet_service.event.ConversionResponseConsumer.handleConversionResponse(io.github.leihuang96.common_module.ConversionResponseEvent)' threw exception\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.decorateException(KafkaMessageListenerContainer.java:2983)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2890)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2854)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2767)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2605)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2494)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2145)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1521)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1459)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1328)\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\n\tat java.base/java.lang.Thread.run(Thread.java:840)\n\tSuppressed: org.springframework.kafka.listener.ListenerExecutionFailedException: Restored Stack Trace\n\t\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:489)\n\t\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)\n\t\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)\n\t\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)\n\t\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2876)\nCaused by: java.lang.NullPointerException: value of originalTraceId == null\n\tat brave.handler.MutableSpan.tag(MutableSpan.java:865)\n\tat brave.RealSpan.tag(RealSpan.java:103)\n\tat io.micrometer.tracing.brave.bridge.BraveSpan.tag(BraveSpan.java:105)\n\tat io.github.leihuang96.wallet_service.event.ConversionResponseConsumer.handleConversionResponse(ConversionResponseConsumer.java:35)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\n\tat org.springframework.kafka.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:71)\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:474)\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invoke(MessagingMessageListenerAdapter.java:421)\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:85)\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:50)\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2876)\n\t... 10 common frames omitted\n","application":"wallet-service"}
